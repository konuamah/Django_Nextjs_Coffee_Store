(()=>{var e={};e.id=802,e.ids=[802],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1106:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(6470),r(3567),r(996);var a=r(170),i=r(5002),n=r(3876),s=r.n(n),l=r(6299),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["menu",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6470)),"/app/src/app/menu/cart/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,3567)),"/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/app/src/app/menu/cart/page.tsx"],u="/menu/cart/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/menu/cart/page",pathname:"/menu/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9189:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3642,23)),Promise.resolve().then(r.t.bind(r,7586,23)),Promise.resolve().then(r.t.bind(r,7838,23)),Promise.resolve().then(r.t.bind(r,8057,23)),Promise.resolve().then(r.t.bind(r,7741,23)),Promise.resolve().then(r.t.bind(r,3118,23))},3711:(e,t,r)=>{Promise.resolve().then(r.bind(r,7063))},7368:(e,t,r)=>{Promise.resolve().then(r.bind(r,9136))},7063:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>s,j:()=>l});var a=r(7247),i=r(8964);let n=(0,i.createContext)(void 0),s=({children:e})=>{let[t,r]=(0,i.useState)([]),[s,l]=(0,i.useState)("0.00"),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(0),[m,x]=(0,i.useState)(""),p=e=>{if(!Array.isArray(e.cart)){console.error("Invalid cart data received:",e);return}r(e.cart.map(e=>({...t.find(t=>t.id===e.id),...e}))),l(e.total_price||"0.00")};(0,i.useEffect)(()=>{x((()=>{let e="csrftoken",t=null;if(document.cookie&&""!==document.cookie){let r=document.cookie.split(";");for(let a=0;a<r.length;a++){let i=r[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t})()||"")},[]);let h=async()=>{c(!0);try{let e=await fetch("http://localhost:8000/cart/detail/",{credentials:"include",headers:{"X-CSRFToken":m}});if(!e.ok)throw Error("Failed to fetch cart");let t=await e.json();p(t)}catch(e){console.error("Error fetching cart:",e)}finally{c(!1)}},b=async e=>{if(d>0)return;u(e=>e+1);let a=t.find(t=>t.id===e.id),i=a?a.quantity+1:1;r(t=>a?t.map(t=>t.id===e.id?{...t,quantity:i,total_price:(parseFloat(e.price)*i).toFixed(2)}:t):[...t,{...e,quantity:1,total_price:e.price}]);try{let t=await fetch(`http://localhost:8000/cart/add/${e.id}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m},body:JSON.stringify({quantity:i,override:!0}),credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to add item to cart")}let r=await t.json();p(r)}catch(e){console.error("Error adding to cart:",e),await h()}finally{u(e=>e-1)}},f=async e=>{if(!(d>0)){u(e=>e+1),r(t=>t.filter(t=>t.id!==e));try{let t=await fetch(`http://localhost:8000/cart/remove/${e}/`,{method:"POST",headers:{"X-CSRFToken":m},credentials:"include"});if(!t.ok)throw Error("Failed to remove item from cart");let r=await t.json();p(r)}catch(e){console.error("Error removing from cart:",e),await h()}finally{u(e=>e-1)}}},v=async(e,t)=>{if(!(d>0)){if(u(e=>e+1),t<=0){await f(e),u(e=>e-1);return}r(r=>r.map(r=>r.id===e?{...r,quantity:t,total_price:(parseFloat(r.price)*t).toFixed(2)}:r));try{let r=await fetch(`http://localhost:8000/cart/add/${e}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m},body:JSON.stringify({quantity:t,override:!0}),credentials:"include"});if(!r.ok)throw Error("Failed to update cart");let a=await r.json();p(a)}catch(e){console.error("Error updating cart:",e),await h()}finally{u(e=>e-1)}}};return(0,i.useEffect)(()=>{h()},[]),a.jsx(n.Provider,{value:{cart:t,cartTotal:s,addToCart:b,removeFromCart:f,updateCartItemQuantity:v,fetchCart:h,isLoading:o},children:e})},l=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},9136:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(7247);r(8964);var i=r(7063),n=r(9906);let s=({item:e})=>{let{updateCartItemQuantity:t,removeFromCart:r}=(0,i.j)();return(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-6 items-center hover:bg-neutral-100 transition-colors duration-200",children:[a.jsx("div",{className:"col-span-6",children:a.jsx("h3",{className:"text-lg text-neutral-800",children:e.name})}),(0,a.jsxs)("div",{className:"col-span-2 text-center text-neutral-800",children:["$",e.price]}),a.jsx("div",{className:"col-span-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>t(e.id,e.quantity-1),className:"w-8 h-8 rounded-full border border-amber-300 hover:bg-amber-200 transition-colors duration-200 flex items-center justify-center text-neutral-700",disabled:e.quantity<=1,children:"−"}),a.jsx("span",{className:"mx-2 text-neutral-800 min-w-[20px] text-center",children:e.quantity}),a.jsx("button",{onClick:()=>t(e.id,e.quantity+1),className:"w-8 h-8 rounded-full border border-amber-300 hover:bg-amber-200 transition-colors duration-200 flex items-center justify-center text-neutral-700",children:"+"})]})}),(0,a.jsxs)("div",{className:"col-span-1 text-center text-neutral-800 font-medium",children:["$",e.total_price]}),a.jsx("div",{className:"col-span-1 flex justify-center",children:a.jsx("button",{onClick:()=>r(e.id),className:"w-8 h-8 flex items-center justify-center text-red-500 hover:text-red-600 transition-colors duration-200 rounded-full hover:bg-red-100","aria-label":"Remove item",children:"\xd7"})})]})},l=()=>{let{cart:e,cartTotal:t,isLoading:r}=(0,i.j)();return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-amber-100",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-700"})}):e.length?a.jsx("div",{className:"min-h-screen bg-cover bg-center bg-fixed flex flex-col items-center py-12",style:{backgroundImage:"url('/cartbg.jpg')"},children:(0,a.jsxs)("div",{className:"bg-white bg-opacity-80 max-w-4xl mx-auto p-4 rounded-2xl shadow-lg backdrop-blur-lg",children:[a.jsx("h1",{className:"text-3xl font-serif text-neutral-800 mb-8 text-center",children:"Your Cart"}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-amber-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-6 border-b border-amber-200 text-neutral-700 font-medium",children:[a.jsx("div",{className:"col-span-6",children:"Product"}),a.jsx("div",{className:"col-span-2 text-center",children:"Price"}),a.jsx("div",{className:"col-span-2 text-center",children:"Quantity"}),a.jsx("div",{className:"col-span-2 text-center",children:"Total"})]}),a.jsx("div",{className:"divide-y divide-amber-200",children:e.map(e=>a.jsx(s,{item:e},e.id))}),a.jsx("div",{className:"p-6 border-t border-amber-200 bg-amber-50 rounded-b-2xl",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-lg font-medium text-neutral-800",children:[a.jsx("div",{children:"Total"}),(0,a.jsxs)("div",{children:["$",t]})]})})]}),a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsx(n.default,{href:"/menu/cart/checkout",children:(0,a.jsxs)("button",{className:"bg-amber-700 text-white px-8 py-3 rounded-full hover:bg-amber-800 transition-colors duration-200 flex items-center space-x-2",onClick:()=>{console.log("Proceeding to checkout...")},children:[a.jsx("span",{className:"mr-2",children:"☕"}),a.jsx("span",{children:"Proceed to Checkout"})]})})})]})}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-amber-100 text-neutral-800",children:[a.jsx("div",{className:"text-4xl mb-4",children:"☕"}),a.jsx("h1",{className:"text-3xl font-serif mb-2",children:"Your Cart"}),a.jsx("p",{className:"text-lg mb-6",children:"Your cart is empty"}),a.jsx(n.default,{href:"/menu",children:a.jsx("button",{className:"bg-amber-700 text-white px-6 py-3 rounded-full hover:bg-amber-800 transition-colors duration-200",children:"Browse Our Menu"})})]})}},3567:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,metadata:()=>b});var a=r(2051),i=r(7818),n=r.n(i),s=r(494),l=r.n(s),o=r(5329),c=r.n(o),d=r(9082),u=r.n(d),m=r(225),x=r.n(m);r(5023);var p=r(5347);let h=(0,p.createProxy)(String.raw`/app/src/app/context/CartContext.tsx#CartProvider`);(0,p.createProxy)(String.raw`/app/src/app/context/CartContext.tsx#useCart`);let b={title:"Bean Scene",description:"SIp Sustainably"};function f({children:e}){return a.jsx("html",{lang:"en",children:a.jsx(h,{children:a.jsx("body",{className:`${n().variable} ${l().variable} ${c().variable} ${u().variable} ${x().variable} antialiased`,children:e})})})}},6470:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(5347).createProxy)(String.raw`/app/src/app/menu/cart/page.tsx#default`)},3881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(4564);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[379,460,564,906],()=>r(1106));module.exports=a})();