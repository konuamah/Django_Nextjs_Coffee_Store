(()=>{var e={};e.id=106,e.ids=[106],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},3e3:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(3208),a(3567),a(996);var r=a(170),i=a(5002),s=a(3876),n=a.n(s),l=a(6299),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["menu",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3208)),"/app/src/app/menu/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,3567)),"/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/app/src/app/menu/page.tsx"],u="/menu/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/menu/page",pathname:"/menu",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9189:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3642,23)),Promise.resolve().then(a.t.bind(a,7586,23)),Promise.resolve().then(a.t.bind(a,7838,23)),Promise.resolve().then(a.t.bind(a,8057,23)),Promise.resolve().then(a.t.bind(a,7741,23)),Promise.resolve().then(a.t.bind(a,3118,23))},3711:(e,t,a)=>{Promise.resolve().then(a.bind(a,7063))},2079:(e,t,a)=>{Promise.resolve().then(a.bind(a,4311))},7063:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>n,j:()=>l});var r=a(7247),i=a(8964);let s=(0,i.createContext)(void 0),n=({children:e})=>{let[t,a]=(0,i.useState)([]),[n,l]=(0,i.useState)("0.00"),[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(0),[p,m]=(0,i.useState)(""),h=e=>{if(!Array.isArray(e.cart)){console.error("Invalid cart data received:",e);return}a(e.cart.map(e=>({...t.find(t=>t.id===e.id),...e}))),l(e.total_price||"0.00")};(0,i.useEffect)(()=>{m((()=>{let e="csrftoken",t=null;if(document.cookie&&""!==document.cookie){let a=document.cookie.split(";");for(let r=0;r<a.length;r++){let i=a[r].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t})()||"")},[]);let x=async()=>{c(!0);try{let e=await fetch("http://localhost:8000/cart/detail/",{credentials:"include",headers:{"X-CSRFToken":p}});if(!e.ok)throw Error("Failed to fetch cart");let t=await e.json();h(t)}catch(e){console.error("Error fetching cart:",e)}finally{c(!1)}},f=async e=>{if(d>0)return;u(e=>e+1);let r=t.find(t=>t.id===e.id),i=r?r.quantity+1:1;a(t=>r?t.map(t=>t.id===e.id?{...t,quantity:i,total_price:(parseFloat(e.price)*i).toFixed(2)}:t):[...t,{...e,quantity:1,total_price:e.price}]);try{let t=await fetch(`http://localhost:8000/cart/add/${e.id}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p},body:JSON.stringify({quantity:i,override:!0}),credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to add item to cart")}let a=await t.json();h(a)}catch(e){console.error("Error adding to cart:",e),await x()}finally{u(e=>e-1)}},g=async e=>{if(!(d>0)){u(e=>e+1),a(t=>t.filter(t=>t.id!==e));try{let t=await fetch(`http://localhost:8000/cart/remove/${e}/`,{method:"POST",headers:{"X-CSRFToken":p},credentials:"include"});if(!t.ok)throw Error("Failed to remove item from cart");let a=await t.json();h(a)}catch(e){console.error("Error removing from cart:",e),await x()}finally{u(e=>e-1)}}},v=async(e,t)=>{if(!(d>0)){if(u(e=>e+1),t<=0){await g(e),u(e=>e-1);return}a(a=>a.map(a=>a.id===e?{...a,quantity:t,total_price:(parseFloat(a.price)*t).toFixed(2)}:a));try{let a=await fetch(`http://localhost:8000/cart/add/${e}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p},body:JSON.stringify({quantity:t,override:!0}),credentials:"include"});if(!a.ok)throw Error("Failed to update cart");let r=await a.json();h(r)}catch(e){console.error("Error updating cart:",e),await x()}finally{u(e=>e-1)}}};return(0,i.useEffect)(()=>{x()},[]),r.jsx(s.Provider,{value:{cart:t,cartTotal:n,addToCart:f,removeFromCart:g,updateCartItemQuantity:v,fetchCart:x,isLoading:o},children:e})},l=()=>{let e=(0,i.useContext)(s);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},4311:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(7247),i=a(8964),s=a(9906),n=a(7063),l=a(4597);let o=({item:e})=>{let{cart:t,addToCart:a,removeFromCart:i,updateCartItemQuantity:s}=(0,n.j)(),o=t.find(t=>t.id===e.id);return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[r.jsx("div",{className:"relative h-48 w-full mb-4",children:r.jsx(l.default,{src:e.image,alt:e.name,layout:"fill",objectFit:"cover",className:"rounded-t-lg"})}),r.jsx("h2",{className:"text-xl font-semibold",children:e.name}),r.jsx("p",{className:"text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("p",{className:"text-lg font-bold",children:["$",parseFloat(e.price).toFixed(2)]}),e.available?(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[r.jsx("p",{className:"text-green-600 font-medium",children:"Available"}),o?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>{let a=t.find(t=>t.id===e.id);a&&a.quantity>1?s(e.id,a.quantity-1):i(e.id)},className:"px-2 py-1 bg-red-100 text-red-600 rounded",children:"-"}),r.jsx("span",{children:o?.quantity||0}),r.jsx("button",{onClick:()=>{let a=t.find(t=>t.id===e.id);a&&s(e.id,a.quantity+1)},className:"px-2 py-1 bg-blue-100 text-blue-600 rounded",children:"+"})]}):r.jsx("button",{onClick:()=>{let t=1*parseFloat(e.price);a({id:e.id,name:e.name,price:e.price,quantity:1,total_price:t.toFixed(2)})},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add to Cart"})]}):r.jsx("p",{className:"text-red-600 font-medium mt-4",children:"Not Available"})]})},c=()=>{let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)([]),[c,d]=(0,i.useState)(null),[u,p]=(0,i.useState)(!0),[m,h]=(0,i.useState)(null),{cart:x,cartTotal:f}=(0,n.j)();return((0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:8000/api/categories/");if(!e.ok)throw Error("Failed to fetch categories");let t=await e.json();l(t)}catch(e){e instanceof Error&&h(e.message)}})()},[]),(0,i.useEffect)(()=>{(async()=>{p(!0);try{let e="http://localhost:8000/api/products/";c&&(e=`http://localhost:8000/api/products/category/${c}/`);let a=await fetch(e);if(!a.ok)throw Error("Failed to fetch products");let r=await a.json();t(r)}catch(e){e instanceof Error&&h(e.message)}finally{p(!1)}})()},[c]),u)?r.jsx("div",{className:"text-center",children:"Loading..."}):m?r.jsx("div",{className:"text-center text-red-500",children:m}):(0,r.jsxs)("div",{className:"relative min-h-screen bg-cover bg-center",style:{backgroundImage:"url('/menubackground.jpg')"},children:[r.jsx("div",{className:"absolute inset-0 bg-black opacity-60 z-0"})," ",(0,r.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto p-6 text-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-4xl font-bold",children:"Food Menu"}),r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(s.default,{href:"/menu/cart",className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{children:["Cart (",x.reduce((e,t)=>e+t.quantity,0),")"]}),(0,r.jsxs)("span",{className:"text-gray-300",children:["$",f]})]})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"mr-4 text-lg font-semibold",children:"Filter by Category:"}),(0,r.jsxs)("select",{value:c||"",onChange:e=>d(e.target.value||null),className:"p-2 border border-gray-300 rounded text-gray-900",children:[r.jsx("option",{value:"",children:"All Categories"}),a.map(e=>r.jsx("option",{value:e.slug,children:e.name},e.id))]})]}),r.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>r.jsx(o,{item:e},e.id))})]})]})}},3567:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g,metadata:()=>f});var r=a(2051),i=a(7818),s=a.n(i),n=a(494),l=a.n(n),o=a(5329),c=a.n(o),d=a(9082),u=a.n(d),p=a(225),m=a.n(p);a(5023);var h=a(5347);let x=(0,h.createProxy)(String.raw`/app/src/app/context/CartContext.tsx#CartProvider`);(0,h.createProxy)(String.raw`/app/src/app/context/CartContext.tsx#useCart`);let f={title:"Bean Scene",description:"SIp Sustainably"};function g({children:e}){return r.jsx("html",{lang:"en",children:r.jsx(x,{children:r.jsx("body",{className:`${s().variable} ${l().variable} ${c().variable} ${u().variable} ${m().variable} antialiased`,children:e})})})}},3208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(5347).createProxy)(String.raw`/app/src/app/menu/page.tsx#default`)},3881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(4564);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[379,460,564,906,597],()=>a(3e3));module.exports=r})();